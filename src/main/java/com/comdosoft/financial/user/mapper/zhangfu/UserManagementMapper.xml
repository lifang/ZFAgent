<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.comdosoft.financial.user.mapper.zhangfu.UserManagementMapper">


	<select id="getUser" resultType="map" parameterType="int">
		SELECT m.id as customersId,m.`name`,a.id as agentId from agents a 
		LEFT JOIN customer_agent_relations c ON a.id=c.agent_id
		LEFT JOIN customers m ON c.customer_id=m.id
		WHERE a.customer_id = #{customerId}
	</select>

	<update id="delectAgentUser" parameterType="map">
		UPDATE customer_agent_relations SET status = #{status}
		WHERE agent_id = #{id} AND customer_id = #{customerId}
	</update>

	<select id="getTerminals" parameterType="map" resultType="map">
		SELECT id,serial_num FROM terminals
		WHERE customer_id=#{id}
		LIMIT #{offSetPage},#{pageSize}
	</select>

</mapper>